<html>
  <head>
    <script type="text/javascript" src="{{STATIC_URL}}components/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}components/sendpost.js"></script>
    
    <style type="text/css">
      body {
        background: #999;
      }
      div.title {
        font-family:arial;
      }
      div.item {
        width: 100%;
        background: #FFF;

        padding: 10px;
        
        border-top: 1px solid #F78454;
        border-bottom: 1px solid #F78454;
        border-left: 2px solid #F78454;
        border-right: 2px solid #F78454;
        
        text-decoration: none;
        color: #000;
        
        overflow: hidden;
        border-radius: 10px;
      }
      div.item:hover {
        background: #FFFF32;
        
      }
      div.bbox {
        float:right;
        border: 2px solid #F78454;
        text-align:center;
        vertical-align:middle;
        cursor: pointer;
        width: 18px;
        height: 18px;
        margin-left: 5px;
        border-radius: 5px;
      }
      div.bbox:hover {
        background-color: #F80;
      }
      div.surroundingBox {
        /*
        border-top: 1px solid #F78454;
        border-bottom: 1px solid #F78454;
        border-radius: 10px;
        */
      }
      div.menubar {
        float:left;
        background: #000;
        overflow: hidden;
      }
      div.filelist {
        float:left;
      }
      div.filename {
        float:left;
        line-height:22px;
      }
      div.filename:hover {
        color: blue;
        cursor: pointer;
      }
    </style>
    <script>
      /****************************** RENAME AND DELETE *****************************\
      | The rename and delete functions are shorter versions of the calls to sendpost|
      \******************************************************************************/
      function renameFile(variableMap){
        sendpost('/spreadsheet/rename', variableMap, function () { location.reload(true); });
      }
      function deleteFile(variableMap) {
        sendpost('/spreadsheet/delete', variableMap, function () { location.reload(true); });
      }
      
      onload = function () {
      
      }
    </script>
  </head>
  <body>
    <div class = "title">
    <h1> Hi {{current_user.username}} </h1>
     <div class="menubar" style="clear:both">
      <input type=button onClick="location.href='/spreadsheet/new'" value="New Spreadsheet"><br />
      <input type=button onClick="location.href='/codedoc/new'" value="New Code Document" active="false"> <br />
      <input type=button onClick="location.href='/accounts/logout'" value="Logout">
    </div>
    <div class="filelist"> 
      {% if user_spreadsheet_list %}
        <div class="surroundingBox">
          {% for s in user_spreadsheet_list %}
              <div class="item" >
                <div class="filename" onclick="location.href='/spreadsheet?{{s.owner}}&{{s.pk}}'"> {{s.file_name}} - {{s.owner}}</div>
                <div class="bbox" onClick="renameFile({'fileid':'{{s.pk}}','newname':prompt('New Name:','{{s.file_name}}')})">R</div>
                <div class="bbox" onClick="deleteFile({'fileid':'{{s.pk}}'})">X</div>
              </div>
          {% endfor %}
        </div>
      {% endif %}
      <div style="clear:both">
        View Only:
        {% if user_view_list %}
          <br />
          {% for s in user_view_list %}
            <a class="item" href="/spreadsheet?{{s.owner}}&{{s.pk}}">{{s.file_name}} - {{s.owner}} </a> <br/>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </body>
</html>
